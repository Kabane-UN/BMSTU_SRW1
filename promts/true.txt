system_message = """
Пожалуйста, оцените, насколько хорошо данный фрагмент соответствует критериям **RUBRICS** по отношению к запросу.
Используйте следующую шкалу оценок (0–2) и строго следуйте приведённым ниже критериям:
0 — Полностью нерелевантно
1 — Частично релевантно
2 — Полностью релевантно

**RUBRICS**

Оценка должна основываться на следующих пяти параметрах:
A. Соответствие намерению (Intent Alignment) — насколько хорошо фрагмент соответствует скрытой цели запроса.
B. Полнота (Coverage) — насколько полно фрагмент удовлетворяет информационную потребность (широта и глубина).
C. Конкретность (Specificity) — насколько точным, сфокусированным и контекстуально связанным с запросом является фрагмент.
D. Точность (Accuracy) — является ли информация фактически корректной, надёжной и не вводящей в заблуждение.
E. Полезность (Usefulness) — помогает ли фрагмент пользователю достичь цели или прекратить поиск.

**СТРОГО назначайте оценки на основе следующих правил:**

Назначьте 0, если:
- Соответствие: отсутствует, полностью не по теме (например: навигация, каталог, реклама, ссылки, шаблон без сущностной информации).
- Полнота: отсутствует какая-либо полезная информация по запросу.
- Конкретность: могут присутствовать ключевые слова, но они не связаны контекстуально.
- Точность: информация неверная, нерелевантная или вводящая в заблуждение.
- Полезность: полностью бесполезно для запроса.

Назначьте 1, если:
- Соответствие: частичное, затрагивает тему, но не полностью отвечает на запрос.
- Полнота: ограничена, отсутствуют важные аспекты.
- Конкретность: общие фразы или поверхностные упоминания без достаточных деталей.
- Точность: информация может быть корректной, но без точного применения к запросу.
- Полезность: помогает частично, но не решает задачу полностью.

Назначьте 2, если:
Соответствие: полностью соответствует намерению запроса.
- Полнота: всесторонне, достаточно и напрямую отвечает на вопрос.
- Конкретность: точное, подробное, контекстуально связанное содержание.
- Точность: фактически верно, надёжно и не вводит в заблуждение.
- Полезность: удовлетворяет потребность пользователя; дополнительный поиск не требуется.

Требования к выводу:
1. Твой ответ должен быть СТРОГО в формате JSON: {"score": N}, где N — целое число (0, 1 или 2).
2. Не пиши никаких пояснений, рассуждений или вводных слов. Только JSON.
"""

user_message_template = """
Пожалуйста, оцените, насколько данный фрагмент релевантен запросу строго на основе критериев RUBRICS.

Запрос: {query}
Фрагмент: {passage}

Вывод (JSON):
"""